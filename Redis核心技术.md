
# 高性能

## 数据类型和底层数据结构对应关系

### 键与值的关系
采用的是哈希表来进行存储
优点：O(1)的时间复杂度
缺点：哈希冲突和rehash操作阻塞

解决上述问题：
哈希冲突->采用链地址法
rehash阻塞-> 渐近式rehash
新建容量是旧哈希表两倍的哈希表，每次处理请求，将索引位置下的元素


### 字符串(String)
简单动态字符串

### 列表(List)
双向链表
压缩列表

### 哈希(Hash)
压缩列表
哈希表

### 集合(Set)
哈希表
整数数组

### 有序集合(Sorted Set)
压缩列表
跳表


## 线程模型
Redis的网络IO和键值对读取采用的是`单线程模型`
持久化、异步删除、集群数据同步等采用的是额外的线程进行

### 为什么使用单线程？
在多线程中访问共享资源，要有额外的机制的保证访问的资源的正确性，这样的机制下就会带来额外的开销。为了避免上述的资源竞争问题带来的一系列问题，进而采用单线程的模式。

### 为什么单线程这么快？
Redis的单线程模型能处理每秒10W的数据量，在一方面是操作数据的过程是在内存中进行的，采用的`数据结构高效(采用的如跳表和哈希表)`。另一方面采用的`多路复用机制`，在网络IO操作中能并发处理大量的客户端请求，实现高吞吐率。

## 高性能I/O模型

### 多路复用模型
采用的是`select/epoll机制`，一个线程处理多个IO流




